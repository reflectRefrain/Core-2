<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>CompTIA A+ 220-1102 ‚Ä¢ 3-Week Tracker</title>
<style>
  :root{
    --bg:#0f1115;--card:#171a21;--muted:#9aa4b2;--text:#e6e9ef;--brand:#6bc4ff;--accent:#64d2ff;--ok:#4ade80;--warn:#fbbf24;--bad:#f87171;--chip:#243244;
  }
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;background:linear-gradient(180deg,#0b1220,#0a0d13 30%,#0b1017);color:var(--text)}
  header{position:sticky;top:0;z-index:5;background:rgba(11,16,23,.8);backdrop-filter:blur(10px);border-bottom:1px solid #1f2733}
  .wrap{max-width:900px;margin:0 auto;padding:14px}
  h1{font-size:20px;margin:6px 0 2px}
  .sub{color:var(--muted);font-size:13px}
  .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
  button,input,select,textarea{font:inherit}
  .btn{background:#1f2a37;color:var(--text);border:1px solid #2a3a4d;border-radius:10px;padding:10px 12px;cursor:pointer}
  .btn:active{transform:translateY(1px)}
  .brand{border-color:#2b4c6b;background:#1b2430}
  .ok{background:#13321d;border-color:#1f5e2d}
  .warn{background:#3a2e12;border-color:#735d16}
  .muted{color:var(--muted)}
  .grid{display:grid;gap:12px}
  .card{background:var(--card);border:1px solid #212b39;border-radius:14px;padding:14px}
  .pill{display:inline-flex;align-items:center;gap:6px;background:var(--chip);border:1px solid #2b3d55;color:#bcd6ff;padding:6px 10px;border-radius:999px;font-size:12px}
  .progress{height:10px;background:#0e1622;border:1px solid #1d2a3b;border-radius:999px;overflow:hidden}
  .bar{height:100%;width:0;background:linear-gradient(90deg,var(--brand),var(--accent));transition:width .3s}
  .kvl{display:flex;gap:10px;flex-wrap:wrap}
  details summary{cursor:pointer;color:#bcd6ff}
  .day{display:grid;gap:10px;background:#121824;border:1px solid #1d2938;border-radius:12px;padding:12px}
  .day h4{margin:0}
  .checklist{display:grid;gap:8px}
  .item{display:flex;align-items:flex-start;gap:10px}
  .item input{transform:translateY(2px)}
  textarea{width:100%;min-height:70px;background:#0d131c;border:1px solid #1b2736;color:var(--text);border-radius:10px;padding:10px}
  .two{display:grid;gap:12px}
  @media(min-width:720px){.two{grid-template-columns:1fr 1fr}}
  .inline{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
  .chip{background:#0f1a26;border:1px solid #1d2c3f;border-radius:10px;padding:8px 10px}
  .list{display:grid;gap:8px}
  .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;background:#0e1520;border:1px solid #1b2a3f;border-radius:8px;padding:2px 6px}
  .copy{cursor:pointer;border:1px dashed #35527a;border-radius:8px;padding:2px 6px}
  .footer{opacity:.7;font-size:12px;padding:20px 0}
  .danger{background:#2b1212;border-color:#6a1e1e}
  .sr{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}
</style>
</head>
<body>
<header>
  <div class="wrap">
    <div class="row" style="justify-content:space-between">
      <div>
        <h1>CompTIA A+ 220-1102 ‚Ä¢ 3-Week Tracker</h1>
        <div class="sub">Plan: <span class="pill">Andrew Ramdayal (Udemy)</span> <span class="pill">Jason Dion Practice Exams</span></div>
      </div>
      <div class="row">
        <button class="btn" id="darkToggle" aria-label="Toggle dark mode">üåô</button>
        <button class="btn brand" id="exportBtn">Export</button>
        <label class="btn" for="importFile" title="Import progress JSON">Import</label>
        <input id="importFile" type="file" accept="application/json" class="sr">
        <button class="btn" id="resetBtn" title="Clear all saved progress">Reset</button>
      </div>
    </div>
    <div class="grid" style="margin-top:12px">
      <div class="card">
        <div class="row" style="justify-content:space-between;align-items:center">
          <div class="row">
            <div class="pill">Overall Progress: <b id="pct">0%</b></div>
            <div class="pill">Completed: <b id="doneCount">0</b>/<b id="totalCount">0</b></div>
            <div class="pill">Streak: <b id="streak">0</b> days</div>
          </div>
          <div class="row">
            <label class="pill">Target Exam Date:
              <input type="date" id="examDate" style="background:#0e1622;border:1px solid #243245;color:#cfe1ff;border-radius:8px;padding:6px;margin-left:6px">
            </label>
          </div>
        </div>
        <div class="progress" style="margin-top:10px"><div class="bar" id="bar"></div></div>
        <div class="sub" id="countdown" style="margin-top:8px"></div>
        <div class="sub" id="nextUp" style="margin-top:4px;color:#b7f5ff"></div>
      </div>
    </div>
  </div>
</header>

<main class="wrap grid" style="margin-top:14px">

  <!-- Quick Utilities -->
  <section class="two">
    <div class="card">
      <h3 style="margin:0 0 8px">Flashcards ‚Ä¢ High-Yield 1102</h3>
      <div class="inline">
        <button class="btn" id="fcPrev">‚óÄ</button>
        <button class="btn brand" id="fcFlip">Flip</button>
        <button class="btn" id="fcKnown">Known ‚úÖ</button>
        <button class="btn warn" id="fcUnknown">Review üîÅ</button>
        <button class="btn" id="fcReset">Reset Deck</button>
      </div>
      <div id="fcCard" class="card" style="margin-top:10px;background:#0f1622;text-align:center;min-height:110px;display:flex;align-items:center;justify-content:center;border-style:dashed">
        <div>
          <div id="fcFront" style="font-weight:700;font-size:18px"></div>
          <div id="fcBack" style="margin-top:6px;color:var(--muted)"></div>
        </div>
      </div>
      <div class="sub" id="fcStatus" style="margin-top:6px"></div>
    </div>

    <div class="card">
      <h3 style="margin:0 0 8px">Glossary & Quick-Copy</h3>
      <input id="search" placeholder="Search commands, acronyms, policies‚Ä¶" style="width:100%;background:#0d131c;border:1px solid #1b2736;color:var(--text);border-radius:10px;padding:10px">
      <div id="results" class="list" style="margin-top:10px"></div>
      <details style="margin-top:10px">
        <summary>Common Windows / Linux Commands</summary>
        <div class="list" style="margin-top:10px">
          <div>Windows: <span class="kbd">sfc /scannow</span> <span class="copy" data-copy="sfc /scannow">Copy</span> ‚Äî verify system files</div>
          <div>Windows: <span class="kbd">dism /online /cleanup-image /restorehealth</span> <span class="copy" data-copy="dism /online /cleanup-image /restorehealth">Copy</span> ‚Äî service component store</div>
          <div>Windows: <span class="kbd">ipconfig /all</span> <span class="copy" data-copy="ipconfig /all">Copy</span> ‚Äî IP details</div>
          <div>Linux: <span class="kbd">chmod 755 file</span> <span class="copy" data-copy="chmod 755 file">Copy</span> ‚Äî permissions</div>
          <div>Linux: <span class="kbd">grep -R "text" /path</span> <span class="copy" data-copy='grep -R "text" /path'>Copy</span> ‚Äî recursive search</div>
        </div>
      </details>
    </div>
  </section>

  <!-- Study Plan -->
  <section class="card">
    <h3 style="margin:0 0 6px">3-Week Plan (15 study days)</h3>
    <div class="sub">Focused for Andrew Ramdayal (Udemy) + Jason Dion exams. Check items as you finish. Add notes for anything that didn‚Äôt stick.</div>
    <div id="plan" class="grid" style="margin-top:12px"></div>
  </section>

  <!-- Practice Exams -->
  <section class="card">
    <h3 style="margin:0 0 6px">Practice Exam Tracker (Jason Dion)</h3>
    <div class="sub">Aim for 1/day in Week 2. Review every explanation, especially wrong answers.</div>
    <div id="exams" class="grid" style="margin-top:10px"></div>
  </section>

  <!-- PBQ + Checklist -->
  <section class="two">
    <div class="card">
      <h3 style="margin:0 0 6px">PBQ Readiness</h3>
      <div class="list">
        <label class="item"><input type="checkbox" data-k="pbq.winAdmin"> I can add a Windows user, set password policy, and adjust UAC.</label>
        <label class="item"><input type="checkbox" data-k="pbq.startup"> I can troubleshoot a no-boot: Safe Mode, Startup Repair, bootrec.</label>
        <label class="item"><input type="checkbox" data-k="pbq.security"> I can choose correct Wi-Fi security (WPA2 vs WPA3), firewall rules.</label>
        <label class="item"><input type="checkbox" data-k="pbq.permissions"> I can compare NTFS vs Share permissions & resolve access issues.</label>
        <label class="item"><input type="checkbox" data-k="pbq.malware"> I know malware removal order & post-incident steps.</label>
      </div>
    </div>
    <div class="card">
      <h3 style="margin:0 0 6px">Final 48-Hour Checklist</h3>
      <div class="list">
        <label class="item"><input type="checkbox" data-k="final.commands"> Re-drill Windows/Linux/macOS commands.</label>
        <label class="item"><input type="checkbox" data-k="final.ops"> Review Operational Procedures (docs, safety, disposal, chain of custody).</label>
        <label class="item"><input type="checkbox" data-k="final.security"> Recheck security protocols & passwords/MFA concepts.</label>
        <label class="item"><input type="checkbox" data-k="final.notes"> Skim my notes & weak-topic flashcards.</label>
        <label class="item"><input type="checkbox" data-k="final.sleep"> Sleep 7‚Äì8 hours, hydrate, arrive early.</label>
      </div>
    </div>
  </section>

  <section class="footer muted">
    Tip: Export your progress JSON before switching devices. Everything saves locally in your browser.
  </section>
</main>

<script>
/* ---------------- State ---------------- */
const KEY='a1102_tracker_v1';
const state = load() || {
  examDate:'',
  dark:true,
  checks:{}, notes:{}, exams:{},
  fc:{known:[],unknown:[],i:0,showBack:false},
  meta:{streak:0,lastDone:''}
};

/* ---------------- Plan Template ---------------- */
const days = [
  {title:'Day 1 ‚Äî Windows Foundations',
   items:[
    'Watch Andrew: Windows editions (Home/Pro/Enterprise), features, min HW.',
    'Hands-on: Settings vs Control Panel; Device Manager tour.',
    'Make flashcards for features you confuse.'
   ]},
  {title:'Day 2 ‚Äî User/Policy/Admin Tools',
   items:[
    'Watch Andrew: Users/Groups, Local Security Policy, UAC, Services.',
    'Lab: create standard vs admin user, test UAC prompts.',
    'Quiz: difference NTFS vs Share permissions.'
   ]},
  {title:'Day 3 ‚Äî Storage & Recovery',
   items:[
    'Watch Andrew: file systems, BitLocker, Recovery options.',
    'Run: sfc /scannow then DISM (note what each does).',
    'PBQ sim: pick right recovery path for a boot failure.'
   ]},
  {title:'Day 4 ‚Äî CLI Essentials',
   items:[
    'Watch Andrew: Command-line (Windows/Linux/macOS).',
    'Drill: ipconfig, netstat, nslookup, diskpart, chmod, grep.',
    'Flashcards: commands & switches you miss.'
   ]},
  {title:'Day 5 ‚Äî Software Troubleshooting I',
   items:[
    'Watch Andrew: App crashes, services failing, updates.',
    'Scenarios: browser hijack, startup loop, corrupt profile.',
    'Document: decision tree for each symptom.'
   ]},
  {title:'Day 6 ‚Äî Software Troubleshooting II',
   items:[
    'Watch Andrew: BSODs, logs (Event Viewer), msconfig, regedit.',
    'Lab: Safe Mode; Startup impact; view logs by source.',
    'Write: 5 signs of malware vs failing hardware.'
   ]},
  {title:'Day 7 ‚Äî Security Basics',
   items:[
    'Watch Andrew: Threats (phishing, trojans, ransomware).',
    'Policies: least privilege, password, locking, PII handling.',
    'Practice: choose best mitigation for 5 scenarios.'
   ]},
  {title:'Day 8 ‚Äî Network Security',
   items:[
    'Watch Andrew: WEP/WPA2/WPA3, authentication, certificates.',
    'Lab: configure SSID with WPA3/enterprise (theory).',
    'Flashcards: protocols & best practices.'
   ]},
  {title:'Day 9 ‚Äî Operational Procedures I',
   items:[
    'Watch Andrew: safety (ESD), docs, ticketing, change mgmt.',
    'Know: disposal (wipe vs shred), MSDS/SDS basics.',
    'Quiz: pick correct policy response per scenario.'
   ]},
  {title:'Day10 ‚Äî Operational Procedures II',
   items:[
    'Watch Andrew: professionalism, escalation, SLAs.',
    'Write: incident report template; chain of custody steps.',
    'Review: ethics & licensing basics.'
   ]},
  {title:'Day11 ‚Äî Full Practice Exam #1',
   items:[
    'Jason Dion Exam A (timed).',
    'Deep review: study every explanation (even correct guesses).',
    'Flashcard EVERY unknown term.'
   ]},
  {title:'Day12 ‚Äî Targeted Repair',
   items:[
    'Rewatch Andrew on weak domains (top 2 gaps).',
    'Mini-drill: 25 Qs on those topics.',
    'Lab: do 1 PBQ-like walkthrough.'
   ]},
  {title:'Day13 ‚Äî Full Practice Exam #2',
   items:[
    'Jason Dion Exam B (timed).',
    'Deep review + flashcards from misses.',
    'Skim official objectives checklist for gaps.'
   ]},
  {title:'Day14 ‚Äî Full Practice Exam #3',
   items:[
    'Jason Dion Exam C (timed).',
    'Review; aim for > 80% before moving on.',
    'Finalize PBQ readiness checklist.'
   ]},
  {title:'Day15 ‚Äî Final Polish',
   items:[
    'Light review: commands, security, ops procedures.',
    'Re-test: 30-50 mixed questions.',
    'Rest routine: sleep plan, logistics for exam.'
   ]},
];

/* ---------------- Practice Exams ---------------- */
const examBank = [
  {k:'dionA', name:'Jason Dion A'},
  {k:'dionB', name:'Jason Dion B'},
  {k:'dionC', name:'Jason Dion C'},
  {k:'dionD', name:'Jason Dion D'},
  {k:'dionE', name:'Jason Dion E'},
  {k:'dionF', name:'Jason Dion F'},
];

/* ---------------- Flashcards (high-yield) ---------------- */
const CARDS = [
  ['Windows Repair Order','Safe Mode ‚Üí Startup Repair ‚Üí SFC ‚Üí DISM ‚Üí System Restore ‚Üí In-place upgrade/reset (data aware)'],
  ['sfc vs dism','SFC = verify/repair system files; DISM = repair component store (use before/after SFC when SFC can‚Äôt fix)'],
  ['NTFS vs Share perms','Effective = most restrictive combo; NTFS applies locally & over network; Share only over network'],
  ['BitLocker vs EFS','BitLocker = full-disk; EFS = per-file/folder (NTFS only). Both need recovery planning.'],
  ['UAC','Limits unauthorized changes; prompts elevation for admin-level actions.'],
  ['WPA2 vs WPA3','WPA3 uses SAE, stronger protection on open networks (OWE), mitigates brute force better than WPA2.'],
  ['Malware removal order','Identify ‚Üí Quarantine ‚Üí Disable restore ‚Üí Remediate (scan) ‚Üí Schedule updates ‚Üí Enable restore ‚Üí Educate.'],
  ['Event Viewer','Application/System/Security logs; use to correlate crashes & driver issues.'],
  ['msconfig','Manage startup, boot options, services for troubleshooting.'],
  ['Permissions priority','Deny overrides Allow; explicit > inherited.'],
  ['Linux perms quickie','r=4,w=2,x=1; 755 = rwx r-x r-x'],
  ['Common commands','ipconfig, netstat, nslookup/dig, chkdsk, diskpart, sfc, dism, gpupdate, shutdown, chmod, grep'],
  ['Policy & docs','Change mgmt, chain of custody, incident reports, inventory, SOPs‚Äîknow purpose & order.'],
  ['User types','Standard vs Admin vs Power User; least privilege principle.'],
  ['Backups','Full, incremental, differential‚Äîknow restore speed vs storage tradeoffs.'],
];

/* ---------------- Build UI ---------------- */
const planEl = document.getElementById('plan');
const examsEl = document.getElementById('exams');
const totalCountEl = document.getElementById('totalCount');

function buildPlan(){
  planEl.innerHTML='';
  days.forEach((d,di)=>{
    const box = document.createElement('div');
    box.className='day';
    box.innerHTML = `<h4>${d.title}</h4>
      <div class="checklist">${d.items.map((t,ti)=>`
        <label class="item">
          <input type="checkbox" data-day="${di}" data-item="${ti}">
          <span>${t}</span>
        </label>`).join('')}</div>
      <details><summary>Notes</summary>
        <textarea data-day-note="${di}" placeholder="What tripped you up today? Fix it here."></textarea>
      </details>`;
    planEl.appendChild(box);
  });
}

function buildExams(){
  examsEl.innerHTML='';
  examBank.forEach((e)=>{
    const score = state.exams[e.k]?.score ?? '';
    const pass = state.exams[e.k]?.done || false;
    const div = document.createElement('div');
    div.className='day';
    div.innerHTML = `
      <div class="row" style="justify-content:space-between">
        <h4 style="margin:0">${e.name}</h4>
        <label class="pill">Score: 
          <input type="number" min="0" max="100" step="1" data-exam-score="${e.k}" value="${score}" 
            style="width:68px;background:#0e1622;border:1px solid #243245;color:#cfe1ff;border-radius:8px;padding:6px;margin-left:6px">%
        </label>
      </div>
      <div class="inline">
        <label class="item"><input type="checkbox" data-exam-done="${e.k}" ${pass?'checked':''}> Mark complete</label>
        <span class="sub">Target: ‚â• 80% before moving on</span>
      </div>
      <details style="margin-top:8px"><summary>Review notes</summary>
        <textarea data-exam-note="${e.k}" placeholder="List unknown terms, commands, policies you missed. Make flashcards."></textarea>
      </details>
    `;
    examsEl.appendChild(div);
  });
}

/* ---------------- Wiring ---------------- */
buildPlan(); buildExams();
const checkboxes = [...document.querySelectorAll('input[type="checkbox"][data-day]')];
const notesAreas = [...document.querySelectorAll('textarea[data-day-note]')];
const examScores = [...document.querySelectorAll('input[data-exam-score]')];
const examDone = [...document.querySelectorAll('input[data-exam-done]')];
const examNotes = [...document.querySelectorAll('textarea[data-exam-note]')];
const pbqFinalChecks = [...document.querySelectorAll('input[data-k]')];

function totalItems(){
  return checkboxes.length + examDone.length + pbqFinalChecks.length;
}
function doneItems(){
  const planDone = checkboxes.filter(c=>isChecked(c)).length;
  const examsDone = examDone.filter(c=>isChecked(c)).length;
  const misc = pbqFinalChecks.filter(c=>isChecked(c)).length;
  return planDone + examsDone + misc;
}
function isChecked(c){ 
  if(c.dataset.day!==undefined) return !!state.checks[`d${c.dataset.day}_i${c.dataset.item}`];
  if(c.dataset.examDone!==undefined) return !!state.exams[c.dataset.examDone]?.done;
  if(c.dataset.k!==undefined) return !!state.checks[`k_${c.dataset.k}`];
  return c.checked;
}

function syncUI(){
  // plan checks
  checkboxes.forEach(c=>{
    const k = `d${c.dataset.day}_i${c.dataset.item}`;
    c.checked = !!state.checks[k];
  });
  // notes
  notesAreas.forEach(t=>{
    const k = `n${t.dataset.dayNote}`;
    t.value = state.notes[k] ?? '';
  });
  // pbq/final
  pbqFinalChecks.forEach(c=>{
    c.checked = !!state.checks[`k_${c.dataset.k}`];
  });
  // exams
  examScores.forEach(e=>{
    const k = e.dataset.examScore;
    e.value = state.exams[k]?.score ?? '';
  });
  examDone.forEach(e=>{
    const k = e.dataset.examDone;
    e.checked = !!state.exams[k]?.done;
  });
  examNotes.forEach(t=>{
    const k = `e_${t.dataset.examNote}`;
    t.value = state.notes[k] ?? '';
  });
  // progress
  const done = doneItems(), total = totalItems();
  document.getElementById('doneCount').textContent = done;
  totalCountEl.textContent = total;
  const pct = total? Math.round((done/total)*100):0;
  document.getElementById('pct').textContent = pct+'%';
  document.getElementById('bar').style.width = pct+'%';
  nextSuggestion();
}
syncUI();

/* streak */
function markStreak(){
  const today = new Date().toISOString().slice(0,10);
  if(state.meta.lastDone===today) return;
  if(state.meta.lastDone){
    const prev = new Date(state.meta.lastDone);
    const cur = new Date(today);
    const diff = (cur - prev)/(1000*60*60*24);
    state.meta.streak = (diff===1)? (state.meta.streak+1):1;
  }else{
    state.meta.streak = 1;
  }
  state.meta.lastDone = today;
  save(); renderStreak();
}
function renderStreak(){
  document.getElementById('streak').textContent = state.meta.streak||0;
}
renderStreak();

/* handlers */
document.addEventListener('change', (e)=>{
  const t=e.target;
  if(t.matches('input[type="checkbox"][data-day]')){
    const k=`d${t.dataset.day}_i${t.dataset.item}`;
    state.checks[k]= t.checked;
    if(t.checked) markStreak();
    save(); syncUI();
  }
  if(t.matches('textarea[data-day-note]')){
    state.notes[`n${t.dataset.dayNote}`]=t.value; save();
  }
  if(t.matches('input[data-exam-score]')){
    const k=t.dataset.examScore;
    state.exams[k] = state.exams[k]||{};
    state.exams[k].score = t.value;
    save();
  }
  if(t.matches('input[data-exam-done]')){
    const k=t.dataset.examDone;
    state.exams[k] = state.exams[k]||{};
    state.exams[k].done = t.checked;
    if(t.checked) markStreak();
    save(); syncUI();
  }
  if(t.matches('textarea[data-exam-note]')){
    state.notes[`e_${t.dataset.examNote}`]=t.value; save();
  }
  if(t.matches('input[data-k]')){
    state.checks[`k_${t.dataset.k}`]=t.checked;
    if(t.checked) markStreak();
    save(); syncUI();
  }
  if(t.id==='examDate'){
    state.examDate=t.value; save(); renderCountdown();
  }
});

document.querySelectorAll('.copy').forEach(btn=>{
  btn.addEventListener('click', ()=>copyText(btn.dataset.copy));
});

function copyText(txt){
  navigator.clipboard.writeText(txt).then(()=>{
    flash(btn= null, 'Copied to clipboard');
  });
}
function flash(btn, msg){
  // simple toast
  const t=document.createElement('div');
  t.textContent=msg;
  t.style.cssText='position:fixed;bottom:18px;left:50%;transform:translateX(-50%);background:#111a29;border:1px solid #274060;padding:8px 12px;border-radius:10px;color:#cfe1ff;z-index:9999';
  document.body.appendChild(t); setTimeout(()=>t.remove(),1300);
}

/* countdown */
function renderCountdown(){
  const el=document.getElementById('countdown');
  if(!state.examDate){el.textContent='Set an exam date to get a countdown.';return;}
  const now=new Date();
  const d=new Date(state.examDate+'T00:00:00');
  const diff=Math.ceil((d-now)/(1000*60*60*24));
  el.textContent = diff>=0 ? `‚è≥ ${diff} day(s) until exam.` : `‚úÖ Exam date passed (${Math.abs(diff)} day(s) ago).`;
}
renderCountdown();

/* next up suggestion */
function nextSuggestion(){
  // find first unchecked in plan, else unchecked exam, else PBQ/final
  const planNext=checkboxes.find(c=>!isChecked(c));
  if(planNext){
    const di=planNext.dataset.day;
    const title=days[+di].title;
    const text=planNext.parentElement.innerText.trim();
    document.getElementById('nextUp').textContent = `Next up: ${title} ‚Üí ${text}`;
    return;
  }
  const exNext=examDone.find(c=>!isChecked(c));
  if(exNext){
    const nm = examBank.find(x=>x.k===exNext.dataset.examDone)?.name || 'Practice Exam';
    document.getElementById('nextUp').textContent = `Next up: ${nm} (timed)`;
    return;
  }
  const miscNext=pbqFinalChecks.find(c=>!isChecked(c));
  if(miscNext){
    const label = miscNext.parentElement.innerText.trim();
    document.getElementById('nextUp').textContent = `Next up: ${label}`;
    return;
  }
  document.getElementById('nextUp').textContent = 'All tasks checked. Light review + rest.';
}

/* Export / Import / Reset */
document.getElementById('exportBtn').onclick=()=>{
  const blob=new Blob([JSON.stringify(state,null,2)],{type:'application/json'});
  const url=URL.createObjectURL(blob);
  const a=document.createElement('a');
  a.href=url;a.download='a1102_progress.json';a.click();
  URL.revokeObjectURL(url);
};
document.getElementById('importFile').onchange=(e)=>{
  const f=e.target.files[0]; if(!f) return;
  const r=new FileReader();
  r.onload=()=>{ try{ const obj=JSON.parse(r.result); Object.assign(state,obj); save(); location.reload(); }catch(err){alert('Invalid JSON');} };
  r.readAsText(f);
};
document.getElementById('resetBtn').onclick=()=>{
  if(confirm('This will clear all saved progress. Continue?')){
    localStorage.removeItem(KEY); location.reload();
  }
};

/* Dark toggle (kept for parity, default is dark) */
document.getElementById('darkToggle').onclick=()=>{
  state.dark=!state.dark; save();
  flash(null, state.dark?'Dark mode':'Dark mode (still dark üòÖ)');
};

/* ---------------- Flashcards Engine ---------------- */
let deck = CARDS.map((c,i)=>({id:i,front:c[0],back:c[1]}));
function fcInit(){
  if(!state.fc.known.length && !state.fc.unknown.length){
    state.fc.unknown = deck.map(d=>d.id);
    state.fc.known = [];
    state.fc.i = 0; state.fc.showBack=false; save();
  }
  fcRender();
}
function fcCurrent(){
  const pool = state.fc.unknown.length? state.fc.unknown : state.fc.known;
  if(!pool.length) return null;
  const id = pool[Math.min(state.fc.i, pool.length-1)];
  return deck.find(d=>d.id===id);
}
function fcRender(){
  const card = fcCurrent();
  const f=document.getElementById('fcFront'), b=document.getElementById('fcBack');
  if(!card){ f.textContent='Deck empty'; b.textContent='Reset to start over.'; return; }
  f.textContent = card.front;
  b.textContent = state.fc.showBack? card.back : 'Tap ‚ÄúFlip‚Äù to reveal';
  document.getElementById('fcStatus').textContent =
    `Unknown: ${state.fc.unknown.length} ‚Ä¢ Known: ${state.fc.known.length}`;
}
function fcFlip(){ state.fc.showBack = !state.fc.showBack; save(); fcRender(); }
function fcAdvance(dir=1){
  const pool = state.fc.unknown.length? state.fc.unknown : state.fc.known;
  state.fc.i = (state.fc.i + dir + pool.length) % pool.length;
  state.fc.showBack=false; save(); fcRender();
}
function fcMove(toKnown){
  const cur = fcCurrent(); if(!cur) return;
  // remove from both pools
  state.fc.unknown = state.fc.unknown.filter(id=>id!==cur.id);
  state.fc.known = state.fc.known.filter(id=>id!==cur.id);
  (toKnown? state.fc.known: state.fc.unknown).push(cur.id);
  state.fc.showBack=false; save(); fcRender();
}
document.getElementById('fcFlip').onclick=fcFlip;
document.getElementById('fcPrev').onclick=()=>fcAdvance(-1);
document.getElementById('fcKnown').onclick=()=>fcMove(true);
document.getElementById('fcUnknown').onclick=()=>fcMove(false);
document.getElementById('fcReset').onclick=()=>{
  state.fc={known:[],unknown:[],i:0,showBack:false}; save(); fcInit();
};
fcInit();

/* ---------------- Glossary Search ---------------- */
const GLOSSARY = [
 {k:'sfc',v:'System File Checker ‚Äî verify/repair protected Windows files.'},
 {k:'dism',v:'Deployment Image Servicing and Management ‚Äî repair Windows component store.'},
 {k:'bitlocker',v:'Full-disk encryption for Windows.'},
 {k:'efs',v:'Encrypting File System ‚Äî per-file encryption (NTFS only).'},
 {k:'uac',v:'User Account Control ‚Äî consent prompts for elevation.'},
 {k:'ntfs',v:'Permissions: read/write/modify/full. Effective perms are most restrictive.'},
 {k:'share permissions',v:'Apply only over network; combine with NTFS (most restrictive wins).'},
 {k:'wpa2',v:'Wi-Fi security (AES); replaced by WPA3 for stronger auth.'},
 {k:'wpa3',v:'Wi-Fi security using SAE; better against offline attacks.'},
 {k:'apipa',v:'169.254.x.x automatic addressing when no DHCP lease (Core 1 refresher).'},
 {k:'bsod',v:'Blue Screen of Death ‚Äî kernel-level crash; check drivers, RAM, logs.'},
 {k:'gpupdate',v:'Refresh Group Policy (Windows).'},
 {k:'chmod',v:'Change file mode bits (Linux/macOS).'},
 {k:'grep',v:'Search text with regex; use -R for recursive.'},
 {k:'chain of custody',v:'Evidence handling documentation for legal/forensics.'},
 {k:'least privilege',v:'Give users only the access needed to do their job.'},
 {k:'phishing',v:'Social engineering via email/messages to steal info.'},
 {k:'sla',v:'Service Level Agreement ‚Äî uptime/response guarantees.'},
];
const resEl=document.getElementById('results');
document.getElementById('search').addEventListener('input', e=>{
  const q=e.target.value.toLowerCase().trim();
  resEl.innerHTML='';
  if(!q) return;
  GLOSSARY.filter(x=>x.k.includes(q)||x.v.toLowerCase().includes(q)).slice(0,12).forEach(x=>{
    const row=document.createElement('div');
    row.className='chip';
    row.innerHTML = `<b>${x.k}</b> ‚Äî ${x.v}`;
    resEl.appendChild(row);
  });
});

/* ---------------- Persistence ---------------- */
function save(){ localStorage.setItem(KEY, JSON.stringify(state)); }
function load(){ try{ return JSON.parse(localStorage.getItem(KEY)||''); }catch(e){ return null; } }

/* ---------------- Misc ---------------- */
document.addEventListener('DOMContentLoaded',()=>{
  // Pre-check saved items
  syncUI();
  // Exam date from state
  if(state.examDate) document.getElementById('examDate').value=state.examDate;
});

/* keep progress up to date */
setInterval(()=>{ renderCountdown(); }, 60*1000);
</script>
</body>
</html>
